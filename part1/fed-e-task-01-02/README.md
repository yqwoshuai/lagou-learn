# Part1-2 作业

( 请在当前文件直接作答 )

## 简答题

### 1. 请说出下列最终执行结果，并解释为什么?

```javascript
var a = [];
for(var i = 0; i < 10; i++) {
  a[i] = function() {
    console.log(i)
  }
}
a[6]()
```

输出结果为 10。
因为var声明的i，作用域不仅仅在for循环内，还在for循环的外部。
当 `a[6]()` 执行的时候，for循环已经完成，i此时的值是10。

### 2. 请说出此案列最终执行结果，并解释为什么?

```javascript
var tmp = 123;
if (true) {
  console.log(tmp);
  let tmp;
}
```

会报错。
因为块级作用域内存在let命令，它所声明的变量就绑定在这个区域，不再受外部影响，形成了暂时性死区。
所以在let声明变量前，对tmp取值会报错。

### 3. 结合ES6语法，用最简单的方式找出数组中的最小值

```javascript
var arr = [12, 34, 32, 89, 4]
```

```javascript
Math.min(...arr)
```

### 4. 请详细说明var、let、const三种声明变量的方式之间的具体差别

1. 变量提升
var声明的变量存在变量提升，即变量可以在声明之前调用，值为undefined
let和const不存在变量提升，即它们所声明的变量一定要在声明后使用，否则报错

2. 块级作用域
var不存在块级作用域
let和const存在块级作用域

3. 重复声明
var允许重复声明变量
let和const在同一作用域不允许重复声明变量

4. 修改声明的变量
var和let可以
const声明一个只读的常量。一旦声明，常量的值就不能改变，但对于对象和数据这种引用类型，内存地址不能修改，可以修改里面的值。

### 5. 请说出下列代码最终输出结果，并解释为什么？

```javascript
var a = 10;
var obj = {
  a: 20,
  fn() {
    setTimeout(() => {
      console.log(this.a)
    })
  }
}
obj.fn()
```

输出 20。
箭头函数内部的this指向是固定的，指向它定义时上层作用域中的this。

### 6. 简述Symbol类型的用途

Symbol类型可以解决属性名冲突的问题，顺带还具备模拟私有属性的功能。
symbol不会出现在 Object.keys()的结果中，也不会出现在JSON.stringify()的结果里。

### 7. 说说什么是浅拷贝，什么是深拷贝？

浅拷贝是指只拷贝内存地址的引用，拷贝出来的对象和源对象指向同一片内存地址
深拷贝会生成新的内存地址来储存拷贝的对象，拷贝出来的对象和源对象用不同的内存地址储存

### 8. 请简述TypeScript与JavaScript之间的关系？

TypeScript是JavaScript的超集，他为JavaScript增加了静态类型、类、模块、接口和类型注解

### 9. 请谈谈你所认为的typescript优缺点

优点：

1. 增加了代码的健壮性和可维护性
2. 自带类型推导，js文件可以直接改为ts文件

缺点：

1. 有一定的学习成本；
2. 短期内增加开发成本。

### 10. 描述引用计数的工作原理和优缺点

优点：

1. 发现垃圾时立即回收；
2. 最大限度减少程序暂停，时刻监控内存情况，保证内存不会占满。

缺点：

1. 无法回收循环引用对象；
2. 时间开销大，需要维护引用数值变化。

### 11. 描述标记整理算法的工作流程

在标记清理之前，会先执行整理，移动活动对象的位置，让内存地址产生连续。

### 12.描述V8中新生代存储区垃圾回收的流程

1. 新生代内存区分为二个等大小的空间；
2. 使用空间为From，空闲空间为To；
3. 活动对象存储于From空间；
4. 标记整理后将活动对象拷贝至To空间；
5. From与To交换空间完成释放。

拷贝的过程中可能出现晋升，就是将新生代中的对象移动到老生代当中
两种情况下会出现晋升：

1. 一轮GC之后还存货的新生代对象会进行晋升；
2. To空间使用率超过25%时需要晋升。

### 13. 描述增量标记算法在何时使用及工作原理

增量标记指的是在程序执行的过程中，将标记的操作拆分成多次执行，通过和代码执行进行交替执行的形式，将代码运行的停顿时间拆分成小段，提升回收效率。
